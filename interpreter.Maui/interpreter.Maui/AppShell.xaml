<?xml version="1.0" encoding="UTF-8" ?>
<Shell
    x:Class="interpreter.Maui.AppShell"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:interpreter.Maui"
    xmlns:pages="clr-namespace:interpreter.Maui.Pages"
    xmlns:components="clr-namespace:interpreter.Maui.Components"
    FlyoutBehavior="Flyout"
    FlyoutWidth="220"
    Title="interpreter.Maui"
    Shell.NavBarIsVisible="True"
    BackgroundColor="#0C1220"
    ForegroundColor="#E6EDF3"
    FlyoutBackgroundColor="#050816">

    <Shell.FlyoutHeader>
        <Grid Padding="16" RowDefinitions="Auto,Auto" RowSpacing="4" BackgroundColor="#050816">
            <Label Text="Interpreter"
                   FontSize="22"
                   FontAttributes="Bold"
                   TextColor="#F9FAFB"/>
            <Label Grid.Row="1"
                   Text="Your smart voice assistant"
                   FontSize="12"
                   TextColor="#9CA3AF"/>
        </Grid>
    </Shell.FlyoutHeader>

    <Shell.FlyoutContent>
        <ScrollView BackgroundColor="#050816">
            <VerticalStackLayout Padding="12" Spacing="8" BackgroundColor="#050816">
                <!-- Recording -->
                <components:SettingsMenuItem
                    Icon="ðŸŽ™ï¸"
                    Text="Recording"
                    Command="{Binding NavigateCommand}"
                    CommandParameter="//RecordingPage" />

                <!-- Voice Profiles -->
                <components:SettingsMenuItem
                    Icon="ðŸŽ¤"
                    Text="Voice Profiles"
                    Command="{Binding NavigateCommand}"
                    CommandParameter="//VoiceProfilesPage" />

                <!-- Microphone Settings -->
                <components:SettingsMenuItem
                    Icon="ðŸŽ™ï¸"
                    Text="Microphone Settings"
                    Command="{Binding NavigateCommand}"
                    CommandParameter="//MicrophoneManagerPage" />
            </VerticalStackLayout>
        </ScrollView>
    </Shell.FlyoutContent>

    <Shell.TitleView>
        <Grid ColumnDefinitions="Auto,*,Auto" Padding="10,0">
            <Label Grid.Column="0"
                   x:Name="PageTitleLabel"
                   Text="Recording" 
                   FontSize="20" 
                   FontAttributes="Bold"
                   VerticalOptions="Center"
                   TextColor="#E6EDF3"/>
            
            <!-- Menu Button -->
            <Border Grid.Column="2"
                    x:Name="ShellMenuButton"
                    BackgroundColor="#1E2633"
                    StrokeThickness="1"
                    Stroke="#60FFFFFF"
                    Padding="10"
                    WidthRequest="44"
                    HeightRequest="44"
                    VerticalOptions="Center">
                <Border.Shadow>
                    <Shadow Brush="#40000000"
                            Offset="0,4"
                            Radius="15"
                            Opacity="0.65"/>
                </Border.Shadow>
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="22"/>
                </Border.StrokeShape>
                <Border.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnMenuButtonClicked"/>
                </Border.GestureRecognizers>
                <Label Text="â˜°"
                       TextColor="#C8D1FF"
                       FontSize="20"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       FontAttributes="Bold"/>
            </Border>
        </Grid>
    </Shell.TitleView>

    <!-- Recording Page - Default -->
    <ShellContent
        Title="Recording"
        ContentTemplate="{DataTemplate pages:RecordingPage}"
        Route="RecordingPage" />

    <!-- Voice Profiles Page -->
    <ShellContent
        Title="Voice Profiles"
        ContentTemplate="{DataTemplate pages:VoiceProfilesPage}"
        Route="VoiceProfilesPage" />

    <!-- Microphone Manager Page -->
    <ShellContent
        Title="Microphone Settings"
        ContentTemplate="{DataTemplate pages:MicrophoneManagerPage}"
        Route="MicrophoneManagerPage" />

</Shell>